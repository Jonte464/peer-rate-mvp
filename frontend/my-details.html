
<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Details – PeerRate</title>

  <link rel="stylesheet" href="/css/pr-theme.css" />
  <link rel="stylesheet" href="/css/profile.css" />
</head>

<body>

  <!-- TOP ROW (samma struktur/ID som index för att main.js ska fungera) -->
  <header class="top-row">
    <div class="shell top-row-inner">
      <a class="brand soft-hover" href="/#top">
        <div class="logo-badge" aria-hidden="true">
          <img class="logo-img" src="/assets/Logo.PNG?v=1" alt="PeerRate logo" />
        </div>
        <div>
          <div class="brand-name">PeerRate</div>
          <div class="brand-sub" data-i18n="top_sub">Trust you can prove</div>
        </div>
      </a>

      <div class="top-actions">
        <div class="top-user" id="topUserPill" aria-live="polite" title="Inloggad" aria-expanded="false">
          <span id="topUserInitials">?</span>
        </div>

        <div class="user-menu" id="userMenu" role="menu" aria-label="Användarmeny">
          <button type="button" id="logoutBtn" data-i18n="user_logout">Logga ut</button>
        </div>

        <button class="lang-pill soft-hover" id="langBtn" type="button" aria-haspopup="true" aria-expanded="false">
          <span id="langLabel">SV</span>
          <span style="opacity:.6;">▾</span>
        </button>

        <button class="menu-btn soft-hover" id="menuBtn" type="button" aria-label="Öppna meny" aria-expanded="false">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 7h16M4 12h16M4 17h16" stroke="rgba(15,15,18,.85)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="lang-menu" id="langMenu" role="menu" aria-label="Välj språk">
      <button type="button" data-lang="sv">Svenska (SV)</button>
      <button type="button" data-lang="en">English (EN)</button>
    </div>

    <nav class="menu-panel" id="menuPanel" aria-label="Meny">
      <div class="shell menu-panel-inner">
        <a class="menu-link" href="/#how"><div data-i18n="menu_how">Hur det funkar</div><span>→</span></a>
        <a class="menu-link" href="/#sim"><div data-i18n="menu_sim">Se värdet direkt</div><span>→</span></a>
        <!-- Global trust and "Lämna betyg" removed from menu -->
        <a class="menu-link" href="/customer.html"><div data-i18n="menu_signup">Registrera dig</div><span>→</span></a>
        <a class="menu-link" href="/profile.html"><div data-i18n="menu_profile">Min profil</div><span>→</span></a>
        <a class="menu-link" href="/my-details.html"><div>My details</div><span>→</span></a>
        <!-- "Se 5P-modellen" removed from menu -->
      </div>
    </nav>
  </header>

  <main class="page">
    <div class="wrap">

      <!-- Inloggningsbadge -->
      <div id="user-badge" class="user-badge hidden">
        <div class="user-avatar" id="user-badge-avatar">PR</div>
        <div>
          <div class="user-label" data-i18n="profile_badge_label">Inloggad som</div>
          <div class="user-name" id="user-badge-name">–</div>
        </div>
      </div>

      <!-- (Invite compact removed) — larger invite form placed beside profile card below -->
      <style>
        /* Ensure profile page text is white for readability on darkened video background */
        .page, .page * { color: #ffffff !important; }

        /* Make the avatar upload label readable on the frosted card (black text) */
        #profile-root .profile-avatar-upload-label { color: #000000 !important; }

        /* Keep profile and invite side-by-side on desktop, allow wrap on small screens */
        .top-profile-row { flex-wrap: nowrap; }
        @media (max-width: 980px) {
          .top-profile-row { flex-wrap: wrap !important; }
          .trust-profile-card { min-width: 320px !important; flex: 1 1 100% !important; }
          .top-profile-row aside.card { max-width: 100% !important; flex: 1 1 100% !important; }
        }
        /* Frosted, translucent cards and profile-specific input styles */
        #profile-root .card,
        .top-profile-row .trust-profile-card,
        .top-profile-row aside.card {
          background: rgba(255,255,255,0.06) !important;
          border: 1px solid rgba(255,255,255,0.09) !important;
          color: #ffffff !important;
          -webkit-backdrop-filter: blur(8px) saturate(120%);
          backdrop-filter: blur(8px) saturate(120%);
          box-shadow: 0 6px 20px rgba(2,6,23,0.35) !important;
        }
        /* Make text and muted text lighter for readability */
        #profile-root .muted, #profile-root .tiny { color: rgba(255,255,255,0.75) !important; }
        #profile-root h1, #profile-root h2, #profile-root h3 { color: #fff !important; }
        /* Inputs on profile page should be translucent */
        #profile-root input, #profile-root textarea, #profile-root select {
          background: rgba(255,255,255,0.04) !important;
          border: 1px solid rgba(255,255,255,0.12) !important;
          color: #fff !important;
        }
        #profile-root input::placeholder, #profile-root textarea::placeholder { color: rgba(255,255,255,0.6) !important; }
        /* Buttons: keep current accent but ensure readable on translucent cards */
        #profile-root .primary { color: #fff !important; }

        /* Override specific inline white sub-cards inside `.trust-profile-card` so they become frosted */
        .trust-profile-card div[style*="background:#f8fafc"],
        .trust-profile-card div[style*="background:#fbfbff"],
        .trust-profile-card div[style*="background:#f1f5f9"],
        .trust-profile-card div[style*="background:#ffffff"],
        .trust-profile-card section[style*="background:#fbfbff"] {
          background: rgba(255,255,255,0.04) !important;
          border: 1px solid rgba(255,255,255,0.08) !important;
          color: #fff !important;
          box-shadow: none !important;
        }
        /* Keep small colored badges intact (spans) by not overriding span backgrounds */
        .trust-profile-card span[style*="background:"] { color: inherit !important; }
      </style>
      <!-- Full-bleed background video (reuses landing hero video) -->
      <div id="profile-bg-video" aria-hidden="true" style="position:fixed;inset:0;overflow:hidden;z-index:-2;pointer-events:none;">
        <video autoplay muted loop playsinline preload="auto" style="width:100%;height:100%;object-fit:cover;transform:translateZ(0);">
          <source src="/assets/hero.mp4?v=4" type="video/mp4" />
        </video>
        <div style="position:absolute;inset:0;background:linear-gradient(180deg,rgba(10,12,20,0.25),rgba(5,8,15,0.5));mix-blend-mode:multiply;pointer-events:none;"></div>
      </div>
      

      <h1>My Details</h1>
      <p class="lead">
        Here you can view your details and your aggregated rating.
      </p>

      <!-- LOGIN-KORT (visas bara om man inte är inloggad) - HIDDEN here because users arrive logged-in -->
      <section class="card hidden" id="login-card" style="display:none;">
        <h2 data-i18n="profile_login_title">Log in</h2>
        <p class="muted" data-i18n="profile_login_lead">
          Log in with the email and password you registered with.
        </p>

        <form id="login-form" autocomplete="off">

          <label for="login-email" data-i18n="profile_login_email">Email</label>
          <input id="login-email" name="email" type="email" placeholder="erik@example.com" />

          <label for="login-password" data-i18n="profile_login_password">Password</label>
          <input id="login-password" name="password" type="password" placeholder="Your password" />

          <div class="row" style="margin-top:12px">
            <button class="primary" type="submit" id="login-btn" data-i18n="profile_login_btn">Log in</button>
          </div>

          <p id="login-status" class="tiny muted" style="margin-top:8px;"></p>
        </form>
      </section>

      <!-- Allt här visas bara när man är inloggad -->
      <div id="profile-root" class="hidden">

        <!-- Mina uppgifter (endast denna box visas on this page) -->
        <section class="card">
          <div style="display:flex;align-items:center;justify-content:space-between;">
            <h2 data-i18n="profile_my_details_title">My details</h2>
            <div>
              <button id="edit-profile-btn" class="primary" style="background:#0b74de;border:none;padding:6px 10px;border-radius:8px;color:white;font-weight:700;">Edit</button>
            </div>
          </div>
          <p class="tiny muted" data-i18n="profile_my_details_lead">Details associated with your profile.</p>

          <!-- Profilbild -->
          <div class="profile-avatar-block">
            <div class="profile-avatar-preview" id="profile-avatar-preview">PR</div>
            <div>
              <label class="profile-avatar-upload-label" data-i18n="profile_avatar_upload">
                Upload profile picture
                <input type="file" id="profile-avatar-input" accept="image/*" />
              </label>
              <p class="profile-avatar-text" data-i18n="profile_avatar_note">
                The image is stored only locally in your browser and is tied to "Signed in as".
              </p>
            </div>
          </div>

          <ul class="profile-list">
            <li><span class="profile-label">Name</span><span class="profile-value" id="profile-name">–</span></li>
            <li><span class="profile-label">Email</span><span class="profile-value" id="profile-email">–</span></li>
            
            <li><span class="profile-label">Phone</span><span class="profile-value" id="profile-phone">–</span></li>
            <li><span class="profile-label">Street address</span><span class="profile-value" id="profile-addressStreet">–</span></li>
            <li><span class="profile-label">Zip code</span><span class="profile-value" id="profile-addressZip">–</span></li>
            <li><span class="profile-label">City</span><span class="profile-value" id="profile-addressCity">–</span></li>
            <li><span class="profile-label">Country</span><span class="profile-value" id="profile-country">–</span></li>
          </ul>
          <div style="margin-top:14px;">
            <button id="delete-account-btn" class="primary" style="background:#ef4444;border:none;padding:8px 12px;border-radius:8px;color:white;font-weight:700;">Delete my account</button>
          </div>
        </section>

      </div>

      <div style="text-align:center;color:rgba(15,15,18,.55);font-size:12px;margin-top:18px;">
        © 2025 by PeerRate.
      </div>
    </div>
  </main>

  <!-- ✅ Viktigt: initiera språk även på profilsidan -->
  <script type="module">
    import { initLandingLanguage } from '/modules/landing/language.js';
    initLandingLanguage();
  </script>

  <script type="module" src="/modules/main.js"></script>
</body>
</html>
