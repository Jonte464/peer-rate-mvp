<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>PeerRate Agent</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Enkel bas-stil, försöker hålla oss kompatibla med befintliga css-filer -->
  <link rel="stylesheet" href="./style.css" />

  <style>
    /* Lite extra stil bara för denna sida */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0b1120;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
    }

    .agent-page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    .agent-header {
      margin-bottom: 1.5rem;
    }

    .agent-header h1 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }

    .agent-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .agent-card {
      background: #020617;
      border-radius: 0.75rem;
      padding: 1rem 1.25rem;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.7);
      border: 1px solid #1f2937;
    }

    .agent-card h2 {
      font-size: 1.2rem;
      margin-top: 0;
      margin-bottom: 0.75rem;
    }

    .agent-section {
      margin-bottom: 0.75rem;
    }

    .agent-section-title {
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .05em;
      color: #9ca3af;
      margin-bottom: 0.35rem;
    }

    .agent-option {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
      font-size: 0.9rem;
    }

    .agent-option input[type="checkbox"] {
      margin-top: 0.15rem;
    }

    .agent-option label {
      cursor: pointer;
    }

    .agent-textarea {
      width: 100%;
      min-height: 80px;
      border-radius: 0.5rem;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      padding: 0.5rem 0.6rem;
      font-size: 0.9rem;
      resize: vertical;
    }

    .agent-summary-card {
      margin-top: 1rem;
      background: #020617;
      border-radius: 0.75rem;
      padding: 0.9rem 1.1rem;
      border: 1px solid #1d4ed8;
    }

    .agent-summary-card h3 {
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .agent-summary-list {
      font-size: 0.9rem;
      line-height: 1.4;
      color: #d1d5db;
    }

    .agent-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.35rem;
    }

    .agent-pill {
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      border: 1px solid #4b5563;
      font-size: 0.75rem;
      color: #9ca3af;
      background: #020617;
    }

    .agent-footer {
      margin-top: 1rem;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .agent-footer code {
      font-size: 0.8rem;
      background: #020617;
      padding: 0.15rem 0.3rem;
      border-radius: 0.25rem;
      border: 1px solid #1f2937;
    }

    @media (max-width: 900px) {
      .agent-layout {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="agent-page">
    <header class="agent-header">
      <h1>PeerRate Agent – Regler & Automatisering</h1>
      <p style="max-width: 700px; font-size: 0.9rem; color:#d1d5db;">
        Här ställer du in hur din PeerRate-agent ska bete sig. Block 1 styr vilka
        <strong>regler & “prompt-profil”</strong> agenten följer. Block 2 styr
        vilka <strong>automatiska beteenden</strong> som ska vara aktiva
        (t.ex. trådhantering, kodskydd m.m.).
      </p>
    </header>

    <main class="agent-layout">
      <!-- BLOCK 1: Regler / Promptprofil -->
      <section class="agent-card" id="rules-card">
        <h2>Block 1 – Regler / Promptprofil</h2>

        <div class="agent-section">
          <div class="agent-section-title">Allmän stil & språk</div>
          <div class="agent-option">
            <input type="checkbox" id="rule-simple-language" checked />
            <label for="rule-simple-language">
              Förklara alltid saker <strong>väldigt enkelt</strong> (nybörjarnivå)
              och dela upp i små steg.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="rule-max-3-steps" checked />
            <label for="rule-max-3-steps">
              Ge max <strong>3 steg åt gången</strong> och fråga alltid om jag vill
              ha nästa 3 steg.
            </label>
          </div>
        </div>

        <div class="agent-section">
          <div class="agent-section-title">Kod & säkerhet</div>
          <div class="agent-option">
            <input type="checkbox" id="rule-no-hallucinations" checked />
            <label for="rule-no-hallucinations">
              Minimera hallucinationer: om information saknas – fråga istället
              för att hitta på.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="rule-full-blocks" checked />
            <label for="rule-full-blocks">
              Ge alltid <strong>hela kodblock eller hela filer</strong> som kan
              kopieras rakt in i VS Code utan pill.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="rule-ask-for-current-code" checked />
            <label for="rule-ask-for-current-code">
              Be alltid först om <strong>nuvarande kod</strong> innan du ger ny
              kod, så vi aldrig skriver över viktiga uppdateringar.
            </label>
          </div>
        </div>

        <div class="agent-section">
          <div class="agent-section-title">Mentorskap & “smarthet”</div>
          <div class="agent-option">
            <input type="checkbox" id="rule-mentor-mode" checked />
            <label for="rule-mentor-mode">
              Agera som <strong>mentor</strong>: rätta mina slarviga promptar,
              föreslå smartare lösningar innan du följer min första idé.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="rule-dependency-warnings" checked />
            <label for="rule-dependency-warnings">
              Varna om en ändring kan påverka annan kod (beroenden, routes,
              databasen m.m.).
            </label>
          </div>
        </div>

        <div class="agent-section">
          <div class="agent-section-title">Egna regler (valfritt)</div>
          <textarea
            id="rule-custom"
            class="agent-textarea"
            placeholder="Skriv egna regler eller önskemål, t.ex. 'agera alltid försiktigt med databasen', 'prioritera Tradera-modulen' osv."
          ></textarea>
        </div>
      </section>

      <!-- BLOCK 2: Automatisering -->
      <section class="agent-card" id="automation-card">
        <h2>Block 2 – Automatisering & beteenden</h2>

        <div class="agent-section">
          <div class="agent-section-title">Tråd & kontext</div>
          <div class="agent-option">
            <input type="checkbox" id="auto-thread-length" checked />
            <label for="auto-thread-length">
              Föreslå <strong>ny tråd</strong> och skapa en kort sammanfattning
              när en konversation börjar bli lång eller tung.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="auto-carry-summary" checked />
            <label for="auto-carry-summary">
              För alltid över <strong>nyckelinformation (manifest)</strong> till
              nästa tråd automatiskt.
            </label>
          </div>
        </div>

        <div class="agent-section">
          <div class="agent-section-title">Kod & utveckling</div>
          <div class="agent-option">
            <input type="checkbox" id="auto-git-commands" checked />
            <label for="auto-git-commands">
              Avsluta varje större ändring med <strong>färdiga Git-kommandon</strong>
              (PowerShell) som jag kan kopiera för deploy.
            </label>
          </div>
          <div class="agent-option">
            <input type="checkbox" id="auto-vscode-friendly" checked />
            <label for="auto-vscode-friendly">
              Anpassa alltid instruktioner till att jag använder
              <strong>VS Code + GitHub + Render prod</strong>.
            </label>
          </div>
        </div>

        <div class="agent-section">
          <div class="agent-section-title">Framtida automatiseringar</div>
          <textarea
            id="automation-custom"
            class="agent-textarea"
            placeholder="Skriv idéer för framtida automatisering, t.ex. 'automatiskt sammanfatta git diff', 'kolla Render-loggar', 'förslag på refaktoreringar' osv."
          ></textarea>
        </div>
      </section>
    </main>

    <!-- Sammanfattning av aktiva inställningar -->
    <section class="agent-summary-card">
      <h3>Aktiv agentprofil (översikt)</h3>
      <div class="agent-summary-list" id="agent-summary-text">
        Välj regler och automatiseringar i blocken ovan, så ser du här en enkel
        sammanfattning av hur din PeerRate-agent kommer att bete sig.
      </div>

      <div class="agent-pill-row" id="agent-pill-row">
        <!-- Små “piller-taggar” fylls i via JavaScript -->
      </div>
    </section>

    <footer class="agent-footer">
      Denna sida är ett <strong>kontrollcenter</strong> för din framtida PeerRate-agent.
      Själva “hjärnan” (AI) kopplas senare på via OpenAI API, men gränssnittet och
      reglerna kan vi designa redan nu.
      <br />
      Senare kan denna profil skickas in som <code>system-prompt</code> till din
      agent via API.
    </footer>
  </div>

  <!-- Enkel modul för att hantera UI (kommer i nästa steg) -->
  <script type="module" src="./modules/agent.js"></script>
</body>
</html>
