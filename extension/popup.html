<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PeerRate</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:12px;min-width:260px;}
    h1{font-size:14px;margin:0 0 10px;}
    .row{display:flex;align-items:center;justify-content:space-between;padding:10px;border:1px solid #ddd;border-radius:10px;}
    .muted{color:#666;font-size:12px;line-height:1.3;margin-top:10px;}
    button{width:100%;margin-top:10px;padding:10px;border-radius:10px;border:1px solid #ddd;background:#fff;cursor:pointer;}
  </style>
</head>
<body>
  <h1>PeerRate (MVP)</h1>

  <div class="row">
    <div>
      <div><strong>Aktiverad på Tradera</strong></div>
      <div style="font-size:12px;color:#666;">Visar “Betygsätt”-knapp på relevanta sidor</div>
    </div>
    <input id="enabled" type="checkbox" />
  </div>

  <button id="testBtn">Öppna PeerRate (test)</button>

  <div class="muted">
    Tips: Gå till en Tradera-sida där en annons verkar avslutad/vunnen/såld, så ska en knapp dyka upp längst ner till höger.
  </div>

  <script>
    const enabledEl = document.getElementById("enabled");
    const testBtn = document.getElementById("testBtn");

    chrome.storage.sync.get({ peerrate_enabled: true }, (data) => {
      enabledEl.checked = !!data.peerrate_enabled;
    });

    enabledEl.addEventListener("change", () => {
      chrome.storage.sync.set({ peerrate_enabled: enabledEl.checked });
    });

    testBtn.addEventListener("click", () => {
      chrome.tabs.create({ url: "https://www.peerrate.ai/" });
    });
  </script>
</body>
</html>
